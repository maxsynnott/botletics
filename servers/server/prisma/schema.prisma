// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
    provider = "prisma-client-js"
}

datasource db {
    provider = "postgresql"
    url      = env("DATABASE_URL")
}

model Game {
    id           String   @id @default(uuid())
    createdAt    DateTime @default(now())
    updatedAt    DateTime @updatedAt
    history      String[]
    whiteBotType String
    activeBot    Bot      @relation("activeGames", fields: [activeBotId], references: [id])
    activeBotId  String
    passiveBot   Bot      @relation("passiveGames", fields: [passiveBotId], references: [id])
    passiveBotId String
}

model User {
    id           String   @id @default(uuid())
    createdAt    DateTime @default(now())
    updatedAt    DateTime @updatedAt
    email        String   @unique
    passwordHash String
    bots         Bot[]
}

model Bot {
    id           String   @id @default(uuid())
    createdAt    DateTime @default(now())
    updatedAt    DateTime @updatedAt
    endpoint     String
    type         String
    name         String
    user         User     @relation(fields: [userId], references: [id])
    userId       String
    elo          Int      @default(1000)
    activeGames  Game[]   @relation("activeGames")
    passiveGames Game[]   @relation("passiveGames")

}

model Session {
    id        String   @id
    sid       String   @unique
    data      String
    expiresAt DateTime
}
